(function(e){function t(t){for(var i,a,h=t[0],n=t[1],l=t[2],c=0,m=[];c<h.length;c++)a=h[c],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&m.push(r[a][0]),r[a]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,h=1;h<s.length;h++){var n=s[h];0!==r[n]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},r={app:0},o=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],n=h.push.bind(h);h.push=t,h=h.slice();for(var l=0;l<h.length;l++)t(h[l]);var u=n;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},1871:function(e,t,s){"use strict";s("efb5")},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],a={name:"App",data(){return{value:""}},methods:{},mounted(){}},h=a,n=(s("1871"),s("2877")),l=Object(n["a"])(h,r,o,!1,null,null,null),u=l.exports,c=s("8c4f"),m=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"checkdiv"},[t("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formData,size:"small"}},[t("el-form-item",{attrs:{label:"时间:"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,clearable:!1,placeholder:"选择日期"},on:{change:e.createNewDate},model:{value:e.formData.time,callback:function(t){e.$set(e.formData,"time",t)},expression:"formData.time"}})],1)],1)],1),t("p",[e._v("默认状态")]),t("time-line",{attrs:{domRef:"vs",clear:"vs"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}}),t("p",[e._v("被我选择过的时段")]),t("time-line",{attrs:{domRef:"vs3",minHour:7,maxHour:23,checkedList:[12,12.5,13.5],clear:"vs3"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}}),t("p",[e._v("其它人选择过的时段")]),t("time-line",{attrs:{domRef:"vs18",minHour:10.5,maxHour:21.5,disabledList:[{name:"张三",time:15},{name:"李四",time:15.5},{name:"王五",time:16}],clear:"vs18"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}}),t("p",[e._v("外部传来的时间根据日期预订（需要提前24小时预订）")]),t("time-line",{attrs:{domRef:"vs19",date:e.formData.time,advance:24,minHour:7,maxHour:23,clear:"vs19"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}})],1)},d=[],f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vslider"},[t("div",{ref:e.domRef,staticClass:"vslider-container"},e._l(e.hourList,(function(s,i){return t("div",{key:i,class:["vslider-item",{lightgray:s.overdue},{darkblue:s.ischecked},{lightblue:s.ishover},{disableblue:s.checked},{darkgray:s.disabled}],attrs:{"hour-list":s.hour,hour:`${e.formatTime(s.hour[0])} ~ ${e.formatTime(s.hour[1])}`,hourkey:i},on:{click:function(t){return e.ClickVslider(s.hour,i,t)},mouseover:function(t){return e.mouseoverItem(s)},mouseleave:function(t){return e.mouseleaveItem(s)}}},[s.overdue||s.disabled||!s.visible?e._e():t("popper",{attrs:{timeformat:e.timeformat,hoverslot:e.tips}},[t("div",{staticClass:"popper-slot",attrs:{slot:"content"},slot:"content"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.onCancel.apply(null,arguments)}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.EventEmit(s.hour,i,t)}}},[e._v("确定")])],1)]),s.overdue&&s.overdueShow?t("popper",{staticClass:"diableBox",attrs:{timeformat:"已过期",hoverslot:" "}}):e._e(),s.checked&&s.checkedShow?t("popper",{staticClass:"diableBox",attrs:{timeformat:"已被我预定",hoverslot:" "}},[t("i",{staticClass:"el-icon-success",staticStyle:{margin:"0 2px",color:"#67C23A"},attrs:{slot:"icon"},slot:"icon"})]):e._e(),s.disabled&&s.disabledShow?t("popper",{staticClass:"diableBox",attrs:{timeformat:`已被${e.disabledList.find(e=>e.time==s.hour[0]).name}预定`,hoverslot:" "}}):e._e()],1)})),0),e.hourList[0].hour[0]%1===0?t("div",{staticClass:"vslider-number"},e._l(e.hourList,(function(s,i){return t("span",{key:i,attrs:{"hour-list":s.hour,hour:`${e.formatTime(s.hour[0])} ~ ${e.formatTime(s.hour[1])}`,hourkey:i}},[e._v(e._s(s.hour[0]%1===0?s.hour[0]:"")+e._s(e.hourList.length-1===i&&s.hour[1]%1===0?s.hour[1]:""))])})),0):t("div",{staticClass:"vslider-number hous"},e._l(e.hourList,(function(s,i){return t("span",{key:i,attrs:{"hour-list":s.hour,hour:`${e.formatTime(s.hour[0])} ~ ${e.formatTime(s.hour[1])}`,hourkey:i}},[e._v(e._s(s.hour[1]%1===0?s.hour[1]:"")+e._s(e.hourList.length-1===i&&s.hour[1]%1===0?s.hour[1]:""))])})),0)])},p=[],v=(s("14d9"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"vslider-popper"},[t("p",[e._t("icon"),e._v(e._s(e.timeformat))],2),t("span",[e._v(e._s(e.hoverslot))]),e._t("content"),t("div",{staticClass:"popper__arrow"})],2)}),b=[],g={name:"popper",props:{timeformat:{type:[String,Number],default:""},hoverslot:{type:[String,Number],default:"(移动光标选择更多时段)"}}},x=g,y=(s("a17a"),Object(n["a"])(x,v,b,!1,null,"d71fc49c",null)),k=y.exports;const H=e=>e>9?e:"0"+e,L=e=>{let t=new Date(e),s=t.getFullYear(),i=H(t.getMonth()+1),r=H(t.getDate()),o=H(t.getHours()),a=H(t.getMinutes());return{NewDate:new Date(`${s}-${i}-${r}`),ym:s+"-"+i,ymd:s+"-"+i+"-"+r,hm:`${o}:${a}`}};var $={name:"timeLine",components:{popper:k},props:{date:{type:[String],default:()=>L(new Date).ymd},advance:{type:[String,Number],default:0},minHour:{type:[String,Number],default:0},maxHour:{type:[String,Number],default:24},unit:{type:[String,Number],default:30},scale:{type:[String,Number],default:.5},disabledList:{type:[String,Array],default:()=>[]},checkedList:{type:[String,Array],default:()=>[]},domRef:{type:String,default:""},clear:{type:Boolean,default:!1}},data(){return{hourList:[],selectmin:"",selectmax:"",startX:0,endX:0,isMove:!1,selectHours:[],hovermin:"",hovermax:""}},watch:{clear(e,t){console.info(t),e||this.onCancel()},date(e,t){console.log(e,t),this.hourList=this.getHoursList()}},computed:{timeformat(){return this.isMove&&this.hovermin&&this.hovermax&&this.selectmin&&this.selectmax?this.hovermax<this.selectmin?this.formatTimeList([this.hovermin,this.selectmax]):this.hovermin>this.selectmax?this.formatTimeList(this.selectmin<this.selectmax?[this.selectmin,this.hovermax]:[this.selectmax,this.hovermax]):this.formatTimeList(this.selectmin<this.selectmax?[this.selectmin,this.selectmax]:[this.selectmax,this.selectmin]):this.formatTimeList(this.selectmin<this.selectmax?[this.selectmin,this.selectmax]:[this.selectmax,this.selectmin])},tips(){return 1!==this.selectHours.length?"":this.endX!==this.startX?"(再次点击确认时段)":"(移动光标选择更多时段)"}},methods:{formatTime(e){let t=String(e).split("."),s=H(t[0]),i=t[1]?H(60*Number("0."+t[1])):"00";return`${s}:${i}`},formatTimeList(e){let[t,s]=e,i=(s-t)/this.scale*this.unit;return`${this.formatTime(t)}~${this.formatTime(s)} ${i}分钟`},getnum(e){let t=String(e).split("."),s=t[1]?H(60*Number("0."+t[1])):"0";return s},getHoursList(){let e=L(new Date),t=`${e.ymd} ${e.hm}`,s=[];for(let i=this.minHour;i<this.maxHour;i+=this.scale)s.push(i);return s.map(e=>({hour:[e,e+this.scale],visible:!1,disabled:this.disabledList.map(e=>e.time).includes(e),overdue:new Date(`${this.date} ${this.formatTime(e+this.scale)}`).getTime()-60*this.advance*60*1e3<new Date(t).getTime(),checked:this.checkedList.includes(e),ischecked:!1,ishover:!1,overdueShow:!1,checkedShow:!1,disabledShow:!1}))},SecondsClick(e,t,s){let i=this.hourList.findIndex((e,t)=>{if(e.hour[0]===this.selectHours[0].hour[0])return t}),r=i>t?this.hourList.slice(t,i+1):this.hourList.slice(i,t+1);if(r.find(e=>e.overdue||e.disabled||e.checked))return;this.selectmax>e[1]?this.selectmin=e[0]:this.selectmax=e[1],this.endX=s.x;let[o,a]=this.selectmin<this.selectmax?[this.selectmin,this.selectmax]:[this.selectmax,this.selectmin];this.hourList=this.hourList.map(e=>({...e,ischecked:e.hour[0]<a&&e.hour[1]>o}))},ClickVslider(e,t,s){(!this.selectHours.length||this.selectHours.length>1)&&(this.selectmin=e[0],this.selectmax=e[1],this.isMove=!0,this.startX=s.x,this.endX=s.x),1===this.selectHours.length&&(this.isMove=!1,this.SecondsClick(e,t,s)),this.selectHours.length>1&&(this.selectHours=[],this.hourList=this.hourList.map(e=>({...e,ischecked:!1})));let i=this.hourList.find(t=>t.hour===e),r=this.hourList.find(e=>e.visible);i.overdue||i.disabled||i.checked||(this.$nextTick(()=>{r&&this.$set(r,"visible",!1),this.$set(this.hourList[t],"visible",!i.visible),this.$set(this.hourList[t],"ischecked",i.ischecked?i.ischecked:!i.ischecked),this.selectHours.push(this.hourList[t])}),this.Clear())},onCancel(){[this.selectmin,this.selectmax,this.selectHours,this.isMove,this.hovermin,this.hovermax]=[0,0,[],!1,"",""],this.hourList=this.hourList.map(e=>({...e,visible:!1,ishover:!1,ischecked:!!e.ischecked&&!e.ischecked}))},EventEmit(e,t,s){1===this.selectHours.length&&this.SecondsClick(e,t,s),this.$emit("getHours",{time:[this.formatTime(this.selectmin),this.formatTime(this.selectmax)],timeformat:this.timeformat}),[this.selectmin,this.selectmax,this.startX,this.endX,this.hovermax,this.hovermin,this.selectHours,this.isMove]=["","",0,0,"","",[],!1],this.hourList=this.getHoursList()},Clear(){this.$emit("clearHours",this.domRef)},mouseoverItem(e){e.checked?this.$set(e,"checkedShow",!0):e.disabled?this.$set(e,"disabledShow",!0):e.overdue&&this.$set(e,"overdueShow",!0)},mouseleaveItem(e){e.checked?this.$set(e,"checkedShow",!1):e.disabled?this.$set(e,"disabledShow",!1):e.overdue&&this.$set(e,"overdueShow",!1)}},created(){this.hourList=this.getHoursList()},mounted(){this.$refs[this.domRef].addEventListener("mousemove",e=>{if(this.isMove){e.x!==this.startX&&(this.endX=e.x);let t=e.target.getAttribute("hourkey"),s=this.selectHours.length?this.hourList.findIndex((e,t)=>{if(e.hour[0]===this.selectHours[0].hour[0])return t}):null;if(!s)return;let[i,r]=s>t?[t,s]:[s,t],o=this.hourList.slice(i,Number(r)+1);if(o.find(e=>e.overdue||e.disabled||e.checked))return;this.hovermin=t?this.hourList[t].hour[0]:this.selectmin,this.hovermax=t?this.hourList[t].hour[1]:this.selectmax,this.$nextTick(()=>{this.hourList=this.hourList.map((e,t)=>({...e,ishover:this.hovermax<this.selectmin?t>Number(i)-1&&t<Number(r):t>Number(i)&&t<Number(r)+1}))})}})}},w=$,_=(s("cdee"),Object(n["a"])(w,f,p,!1,null,"46075c4e",null)),S=_.exports;const T=e=>e>9?e:"0"+e,C=e=>{let t=new Date(e),s=t.getFullYear(),i=T(t.getMonth()+1),r=T(t.getDate()),o=T(t.getHours()),a=T(t.getMinutes());return{NewDate:new Date(`${s}-${i}-${r}`),ym:s+"-"+i,ymd:s+"-"+i+"-"+r,hm:`${o}:${a}`}};var D={components:{timeLine:S},data(){return{clear:"",formData:{time:C(new Date).ymd},pickerOptions:{disabledDate(e){return e.getTime()<Date.now()-864e5}}}},methods:{createNewDate(e){this.$nextTick(()=>{this.$set(this.formData,"time",e)})},getHours(e){this.$message({type:"success",message:JSON.stringify(e)})},clearHours(e){this.clear=e}}},N=D,O=Object(n["a"])(N,m,d,!1,null,"6e4fcf6c",null),M=O.exports;i["default"].use(c["a"]);const j=[{path:"/",name:"home",component:M}],X=new c["a"]({routes:j});X.beforeEach((e,t,s)=>{s()}),X.onError(e=>{const t=/Loading chunk (\d)+ failed/g,s=e.message.match(t);s&&window.location.reload()});var P=s("5c96"),R=s.n(P);s("0fae");i["default"].use(R.a),i["default"].config.productionTip=!1,new i["default"]({render:e=>e(u),router:X}).$mount("#app")},"844c":function(e,t,s){},a17a:function(e,t,s){"use strict";s("b21e")},b21e:function(e,t,s){},cdee:function(e,t,s){"use strict";s("844c")},efb5:function(e,t,s){}});
//# sourceMappingURL=app.b111533b.js.map