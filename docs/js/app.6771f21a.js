(function(e){function t(t){for(var r,n,a=t[0],c=t[1],u=t[2],l=0,m=[];l<a.length;l++)n=a[l],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],r=!0,a=1;a<i.length;a++){var c=i[a];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=i[0]))}return e}var r={},s={app:0},o=[];function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var h=c;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var r=i("85ec"),s=i.n(r);s.a},"2ed5":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],n={name:"App",data:function(){return{value:""}},methods:{},mounted:function(){}},a=n,c=(i("034f"),i("2877")),u=Object(c["a"])(a,s,o,!1,null,null,null),h=u.exports,l=(i("ac1f"),i("466d"),i("8c4f")),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"checkdiv"},[i("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formData,size:"small"}},[i("el-form-item",{attrs:{label:"时间:"}},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,clearable:!1,placeholder:"选择日期"},on:{change:e.createNewDate},model:{value:e.formData.time,callback:function(t){e.$set(e.formData,"time",t)},expression:"formData.time"}})],1)],1)],1),i("p",[e._v("默认状态")]),i("time-line",{attrs:{domRef:"vs",clear:"vs"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}}),i("p",[e._v("被我选择过的时段")]),i("time-line",{attrs:{domRef:"vs3",minHour:7,maxHour:23,checkedList:[12,12.5,13.5],clear:"vs3"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}}),i("p",[e._v("其它人选择过的时段")]),i("time-line",{attrs:{domRef:"vs18",minHour:10.5,maxHour:21.5,disabledList:[{name:"张三",time:15},{name:"李四",time:15.5},{name:"王五",time:16}],clear:"vs18"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}}),i("p",[e._v("外部传来的时间根据日期预订（需要提前24小时预订）")]),i("time-line",{attrs:{domRef:"vs19",date:e.formData.time,advance:24,minHour:7,maxHour:23,clear:"vs19"==e.clear},on:{getHours:e.getHours,clearHours:e.clearHours}})],1)},d=[],f=(i("99af"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vslider"},[i("div",{ref:e.domRef,staticClass:"vslider-container"},e._l(e.hourList,(function(t,r){return i("div",{key:r,class:["vslider-item",{lightgray:t.overdue},{darkblue:t.ischecked},{lightblue:t.ishover},{disableblue:t.checked},{darkgray:t.disabled}],attrs:{"hour-list":t.hour,hour:e.formatTime(t.hour[0])+" ~ "+e.formatTime(t.hour[1]),hourkey:r},on:{click:function(i){return e.ClickVslider(t.hour,r,i)},mouseover:function(i){return e.mouseoverItem(t)},mouseleave:function(i){return e.mouseleaveItem(t)}}},[t.overdue||t.disabled||!t.visible?e._e():i("popper",{attrs:{timeformat:e.timeformat,hoverslot:e.tips}},[i("div",{staticClass:"popper-slot",attrs:{slot:"content"},slot:"content"},[i("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.onCancel(t)}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return i.stopPropagation(),e.EventEmit(t.hour,r,i)}}},[e._v("确定")])],1)]),t.overdue&&t.overdueShow?i("popper",{staticClass:"diableBox",attrs:{timeformat:"已过期",hoverslot:" "}}):e._e(),t.checked&&t.checkedShow?i("popper",{staticClass:"diableBox",attrs:{timeformat:"已被我预定",hoverslot:" "}},[i("i",{staticClass:"el-icon-success",staticStyle:{margin:"0 2px",color:"#67C23A"},attrs:{slot:"icon"},slot:"icon"})]):e._e(),t.disabled&&t.disabledShow?i("popper",{staticClass:"diableBox",attrs:{timeformat:"已被"+e.disabledList.find((function(e){return e.time==t.hour[0]})).name+"预定",hoverslot:" "}}):e._e()],1)})),0),e.hourList[0].hour[0]%1===0?i("div",{staticClass:"vslider-number"},e._l(e.hourList,(function(t,r){return i("span",{key:r,attrs:{"hour-list":t.hour,hour:e.formatTime(t.hour[0])+" ~ "+e.formatTime(t.hour[1]),hourkey:r}},[e._v(e._s(t.hour[0]%1===0?t.hour[0]:"")+e._s(e.hourList.length-1===r&&t.hour[1]%1===0?t.hour[1]:""))])})),0):i("div",{staticClass:"vslider-number hous"},e._l(e.hourList,(function(t,r){return i("span",{key:r,attrs:{"hour-list":t.hour,hour:e.formatTime(t.hour[0])+" ~ "+e.formatTime(t.hour[1]),hourkey:r}},[e._v(e._s(t.hour[1]%1===0?t.hour[1]:"")+e._s(e.hourList.length-1===r&&t.hour[1]%1===0?t.hour[1]:""))])})),0)])}),v=[],p=(i("7db0"),i("c740"),i("caad"),i("d81d"),i("fb6a"),i("a9e3"),i("2532"),i("1276"),i("5530")),b=i("3835"),g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vslider-popper"},[i("p",[e._t("icon"),e._v(e._s(e.timeformat))],2),i("span",[e._v(e._s(e.hoverslot))]),e._t("content"),i("div",{staticClass:"popper__arrow"})],2)},x=[],y={name:"popper",props:{timeformat:{type:[String,Number],default:""},hoverslot:{type:[String,Number],default:"(移动光标选择更多时段)"}}},k=y,H=(i("b69e"),Object(c["a"])(k,g,x,!1,null,"4771acf1",null)),L=H.exports,w=function(e){return e>9?e:"0".concat(e)},_=function(e){var t=new Date(e),i=t.getFullYear(),r=w(t.getMonth()+1),s=w(t.getDate()),o=w(t.getHours()),n=w(t.getMinutes());return{NewDate:new Date("".concat(i,"-").concat(r,"-").concat(s)),ym:i+"-"+r,ymd:i+"-"+r+"-"+s,hm:"".concat(o,":").concat(n)}},S={name:"timeLine",components:{popper:L},props:{date:{type:[String],default:function(){return _(new Date).ymd}},advance:{type:[String,Number],default:0},minHour:{type:[String,Number],default:0},maxHour:{type:[String,Number],default:24},unit:{type:[String,Number],default:30},scale:{type:[String,Number],default:.5},disabledList:{type:[String,Array],default:function(){return[]}},checkedList:{type:[String,Array],default:function(){return[]}},domRef:{type:String,default:""},clear:{type:Boolean,default:!1}},data:function(){return{hourList:[],selectmin:"",selectmax:"",startX:0,endX:0,isMove:!1,selectHours:[],hovermin:"",hovermax:""}},watch:{clear:function(e,t){console.info(t),e||this.onCancel()},date:function(e,t){console.log(e,t),this.hourList=this.getHoursList()}},computed:{timeformat:function(){return this.isMove&&this.hovermin&&this.hovermax&&this.selectmin&&this.selectmax?this.hovermax<this.selectmin?this.formatTimeList([this.hovermin,this.selectmax]):this.hovermin>this.selectmax?this.formatTimeList(this.selectmin<this.selectmax?[this.selectmin,this.hovermax]:[this.selectmax,this.hovermax]):this.formatTimeList(this.selectmin<this.selectmax?[this.selectmin,this.selectmax]:[this.selectmax,this.selectmin]):this.formatTimeList(this.selectmin<this.selectmax?[this.selectmin,this.selectmax]:[this.selectmax,this.selectmin])},tips:function(){return 1!==this.selectHours.length?"":this.endX!==this.startX?"(再次点击确认时段)":"(移动光标选择更多时段)"}},methods:{formatTime:function(e){var t=String(e).split("."),i=w(t[0]),r=t[1]?w(60*Number("0.".concat(t[1]))):"00";return"".concat(i,":").concat(r)},formatTimeList:function(e){var t=Object(b["a"])(e,2),i=t[0],r=t[1],s=(r-i)/this.scale*this.unit;return"".concat(this.formatTime(i),"~").concat(this.formatTime(r)," ").concat(s,"分钟")},getnum:function(e){var t=String(e).split("."),i=t[1]?w(60*Number("0.".concat(t[1]))):"0";return i},getHoursList:function(){for(var e=this,t=_(new Date),i="".concat(t.ymd," ").concat(t.hm),r=[],s=this.minHour;s<this.maxHour;s+=this.scale)r.push(s);return r.map((function(t){return{hour:[t,t+e.scale],visible:!1,disabled:e.disabledList.map((function(e){return e.time})).includes(t),overdue:new Date("".concat(e.date," ").concat(e.formatTime(t+e.scale))).getTime()-60*e.advance*60*1e3<new Date(i).getTime(),checked:e.checkedList.includes(t),ischecked:!1,ishover:!1,overdueShow:!1,checkedShow:!1,disabledShow:!1}}))},SecondsClick:function(e,t,i){var r=this,s=this.hourList.findIndex((function(e,t){if(e.hour[0]===r.selectHours[0].hour[0])return t})),o=s>t?this.hourList.slice(t,s+1):this.hourList.slice(s,t+1);if(!o.find((function(e){return e.overdue||e.disabled||e.checked}))){this.selectmax>e[1]?this.selectmin=e[0]:this.selectmax=e[1],this.endX=i.x;var n=this.selectmin<this.selectmax?[this.selectmin,this.selectmax]:[this.selectmax,this.selectmin],a=Object(b["a"])(n,2),c=a[0],u=a[1];this.hourList=this.hourList.map((function(e){return Object(p["a"])(Object(p["a"])({},e),{},{ischecked:e.hour[0]<u&&e.hour[1]>c})}))}},ClickVslider:function(e,t,i){var r=this;(!this.selectHours.length||this.selectHours.length>1)&&(this.selectmin=e[0],this.selectmax=e[1],this.isMove=!0,this.startX=i.x,this.endX=i.x),1===this.selectHours.length&&(this.isMove=!1,this.SecondsClick(e,t,i)),this.selectHours.length>1&&(this.selectHours=[],this.hourList=this.hourList.map((function(e){return Object(p["a"])(Object(p["a"])({},e),{},{ischecked:!1})})));var s=this.hourList.find((function(t){return t.hour===e})),o=this.hourList.find((function(e){return e.visible}));s.overdue||s.disabled||s.checked||(this.$nextTick((function(){o&&r.$set(o,"visible",!1),r.$set(r.hourList[t],"visible",!s.visible),r.$set(r.hourList[t],"ischecked",s.ischecked?s.ischecked:!s.ischecked),r.selectHours.push(r.hourList[t])})),this.Clear())},onCancel:function(){var e=[0,0,[],!1,"",""];this.selectmin=e[0],this.selectmax=e[1],this.selectHours=e[2],this.isMove=e[3],this.hovermin=e[4],this.hovermax=e[5],this.hourList=this.hourList.map((function(e){return Object(p["a"])(Object(p["a"])({},e),{},{visible:!1,ishover:!1,ischecked:!!e.ischecked&&!e.ischecked})}))},EventEmit:function(e,t,i){1===this.selectHours.length&&this.SecondsClick(e,t,i),this.$emit("getHours",{time:[this.formatTime(this.selectmin),this.formatTime(this.selectmax)],timeformat:this.timeformat});var r=["","",0,0,"","",[],!1];this.selectmin=r[0],this.selectmax=r[1],this.startX=r[2],this.endX=r[3],this.hovermax=r[4],this.hovermin=r[5],this.selectHours=r[6],this.isMove=r[7],this.hourList=this.getHoursList()},Clear:function(){this.$emit("clearHours",this.domRef)},mouseoverItem:function(e){e.checked?this.$set(e,"checkedShow",!0):e.disabled?this.$set(e,"disabledShow",!0):e.overdue&&this.$set(e,"overdueShow",!0)},mouseleaveItem:function(e){e.checked?this.$set(e,"checkedShow",!1):e.disabled?this.$set(e,"disabledShow",!1):e.overdue&&this.$set(e,"overdueShow",!1)}},created:function(){this.hourList=this.getHoursList()},mounted:function(){var e=this;this.$refs[this.domRef].addEventListener("mousemove",(function(t){if(e.isMove){t.x!==e.startX&&(e.endX=t.x);var i=t.target.getAttribute("hourkey"),r=e.selectHours.length?e.hourList.findIndex((function(t,i){if(t.hour[0]===e.selectHours[0].hour[0])return i})):null;if(!r)return;var s=r>i?[i,r]:[r,i],o=Object(b["a"])(s,2),n=o[0],a=o[1],c=e.hourList.slice(n,Number(a)+1);if(c.find((function(e){return e.overdue||e.disabled||e.checked})))return;e.hovermin=i?e.hourList[i].hour[0]:e.selectmin,e.hovermax=i?e.hourList[i].hour[1]:e.selectmax,e.$nextTick((function(){e.hourList=e.hourList.map((function(t,i){return Object(p["a"])(Object(p["a"])({},t),{},{ishover:e.hovermax<e.selectmin?i>Number(n)-1&&i<Number(a):i>Number(n)&&i<Number(a)+1})}))}))}}))}},O=S,T=(i("b1e5"),Object(c["a"])(O,f,v,!1,null,"1facfd5b",null)),j=T.exports,C=function(e){return e>9?e:"0".concat(e)},D=function(e){var t=new Date(e),i=t.getFullYear(),r=C(t.getMonth()+1),s=C(t.getDate()),o=C(t.getHours()),n=C(t.getMinutes());return{NewDate:new Date("".concat(i,"-").concat(r,"-").concat(s)),ym:i+"-"+r,ymd:i+"-"+r+"-"+s,hm:"".concat(o,":").concat(n)}},$={components:{timeLine:j},data:function(){return{clear:"",formData:{time:D(new Date).ymd},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},methods:{createNewDate:function(e){var t=this;this.$nextTick((function(){t.$set(t.formData,"time",e)}))},getHours:function(e){this.$message({type:"success",message:JSON.stringify(e)})},clearHours:function(e){this.clear=e}}},N=$,M=Object(c["a"])(N,m,d,!1,null,"32e7f3ea",null),E=M.exports;r["default"].use(l["a"]);var X=[{path:"/",name:"home",component:E}],P=new l["a"]({routes:X});P.beforeEach((function(e,t,i){i()})),P.onError((function(e){var t=/Loading chunk (\d)+ failed/g,i=e.message.match(t);i&&window.location.reload()}));var R=i("5c96"),I=i.n(R);i("0fae");r["default"].use(I.a),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(h)},router:P}).$mount("#app")},"6a32":function(e,t,i){},"85ec":function(e,t,i){},b1e5:function(e,t,i){"use strict";var r=i("2ed5"),s=i.n(r);s.a},b69e:function(e,t,i){"use strict";var r=i("6a32"),s=i.n(r);s.a}});
//# sourceMappingURL=app.6771f21a.js.map